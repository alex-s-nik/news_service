# Сервис новостей My News

Сервис My News - сервис для публикации новостей.

У каждой новости могут быть комментарии и лайки.

Есть система пользователей. Кроме обычных пользователей есть Администраторы.

## Возможности
Создавать Новости, оставлять комментарии и лайки могут создавать только зарегистрированные пользователи.

Незарегистрированным пользователям доступен просмотр новостей и комментариев.

Список новостей выводится в пагинацией.

Пользователи могут удалять и изменять свои новости.

Админ может удалять и изменять любую новость.

Кроме того, автор может удалять комментарии к своим новостям, а админ может удалять любые комментарии.

При получении списка новостей и одной конкретной новости показывается количество лайков и комментариев, а также список последних 10 комментариев.

## Как развернуть
Необходимо склонировать проект на сервер, создать файл .env (для примера есть файл .env.example) и запустить команды
```
make migrate
make run
```
После запуска файлы БД будут расшарены в папку ```.data```

Для создания суперпользователя необходимо воспользоваться командой ниже. Имя пользователя, пароль и почта для него указываются в .env-файле (ADMIN_USER, ADMIN_PASSWORD, ADMIN_EMAIL)
```
make create_superuser
```

Для наполнения БД фейковыми сгенерированными данными можно воспользоваться командой
```
make add_fake_data
```
Она создаст 10 пользователей, 50 новостей и 200 комментариев к ним.

## Использование
1. Доступна админка по адресу
```
<server_name>/admin
```

2. Для логина используется ручка
```
POST <server_name>/api/v1/auth/login/
```
3. Для логаута
```
POST <server_name>/api/v1/auth/logout/
```

4. Получить все новости
```
GET <server_name>/api/v1/news/
```

5. Получить конкретную новость
```
GET <server_name>/api/v1/news/<news_id>/
```

6. Создать новость
```
POST <server_name>/api/v1/news/
```
в теле необходимо передать текст новости и заголовок

7. Изменить новость
```
PATCH <server_name>/api/v1/news/<news_id>/
```
в теле необходимо передать изменяемое поле

8. Удалить новость

```
DELETE <server_name>/api/v1/news/<news_id>/
```

9. Лайкнуть новость
```
POST <server_name>/api/v1/news/<news_id>/like
```

10. Получить комментарии к новости с id news_id
```
GET <server_name>/api/v1/news/<news_id>/comments/
```
11. Добавить комментарий
```
POST <server_name>/api/v1/news/<news_id>/comments/
```
в теле необходимо передать текст комментария

12. Удалить комментарий
```
POST <server_name>/api/v1/news/<news_id>/comments/<comment_id>
```

## Используемые технологии

Python 3.11, Django 4.2, Docker, PostgreSQL, Nginx, Gunicorn, Pytest, Factory boy, Faker.